<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
</head>
<style>
*{
  padding:0px;
  margin:0px;
	cursor:default;
}

</style>

<body onload="draw('canvas')">
<canvas id="canvas" width="1000" height="600" ></canvas>
</body>

<script>
	function draw(id){
		var canvas=document.getElementById(id);
		if(canvas==null)
			return false;
		
		var content=canvas.getContext('2d');
		content.fillStyle="#fff";
		content.fillRect(0,0,1000,600);
		
	}
	
	function zfx(id,x,y,oldx,oldy){
		var canvas=document.getElementById(id);
		if(canvas==null)
			return false;
		var content=canvas.getContext('2d');
			content.fillStyle="#09C";
			content.beginPath();
			content.quadraticCurveTo(x,y,oldx,oldy);
			content.closePath();
			content.fill();
			content.stroke();
			
		var mouse=document.getElementById("mouse");
		mouse.innerHTML=x+","+y;
	}
	
	var canvas=document.getElementById("canvas");
	var oldx;
	var oldy;
	canvas.onmousedown=function(m){
		var down_e = m || window.event;  
		if ((navigator.userAgent.indexOf("Firefox") != -1)) {
				oldx=down_e.layerX;
				oldy=down_e.layerY;
            }
            else {
				oldx=down_e.x;
				oldy=down_e.y;
            }
		canvas.onmousemove=function(eq){
			
			var e = eq || window.event;    
			
			if ((navigator.userAgent.indexOf("Firefox") != -1)) {
				zfx("canvas",e.layerX,e.layerY,oldx,oldy);
				oldx=e.layerX;
				oldy=e.layerY;
            }
            else {
				zfx("canvas",e.x,e.y,oldx,oldy);
				oldx=e.x;
				oldy=e.y;
            }
		}
	}
	canvas.onmouseup=function(){
		canvas.onmousemove=function(){
		}
	}
function save(canvas){
	document.getElementById("temp").value=canvas.toDataURL("image/jpeg");
}
	
</script>
<div id="mouse"></div>
<input type="button" id="save" value="保存" onclick="save(document.getElementById('canvas'))" >
<input type="text" id="temp" />
</html>
